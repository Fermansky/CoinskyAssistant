<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.felixhua.coinskyassistant.mapper.ItemMapper">
    <select id="selectAllItems" resultType="com.felixhua.coinskyassistant.entity.ItemPO">
        select * from item
    </select>
    <select id="selectItemsWithoutDescription" resultType="com.felixhua.coinskyassistant.entity.ItemPO">
        select * from item where description is null
    </select>
    <select id="selectItemsWithoutImg" resultType="com.felixhua.coinskyassistant.entity.ItemPO">
        select * from item where img is null
    </select>
    <select id="selectItemsWithIncompleteProperties" resultType="com.felixhua.coinskyassistant.entity.ItemPO">
        select * from item where name is null or description is null or price is null or create_time is null or img is null
    </select>
    <select id="checkItem">
        select count(*) from item where url = #{url}
    </select>
    <select id="getIdByUrl">
        select id from item where url = #{url}
    </select>
    <update id="updateItem">
        update item set description = #{description}, create_time = #{createTime},
        name = #{name}, price = #{price}, img = #{imgUrl} where id = #{id}
    </update>
    <insert id="insertItem">
        INSERT INTO item ( name, description, price, url, create_time )
        VALUES ( #{name}, #{description}, #{price}, #{url}, #{createTime} )
    </insert>
    <insert id="insertImage">
        INSERT INTO images ( item_id, img_url )
        VALUES ( #{itemId}, #{url} )
    </insert>
</mapper>